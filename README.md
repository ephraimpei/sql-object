# SQL Object

## Summary

SQL Object is an ORM solution that maps SQL queries onto Ruby objects. It aims
to provide an alternative to ActiveRecord.

## Libraries

- SQLite3
- RSpec
- ActiveSupport::Inflector

## Features

- Replicates core functionality of ActiveRecord::Base and
ActiveRecord::Relation (as [`SQLObject`](/lib/sql_object.rb) and [`SQLRelation`](/lib/sql_relation.rb))
- Super friendly API - most SQLObject and SQLRelation enumerative methods will accept params or a block as an argument
- SQLRelation search parameters are stackable and lazily-evaluated - i.e. `Cat.all.where(name: "Rocco").where(owner_id: 2)` won't fire off a SQL query until you call `#count`, `#force`, `#limit`, etc.

## API

SQLObject provides a few of your favorite ActiveRecord associations:

- `has_many`
- `belongs_to`
- `has_one_through`

SQLObject provides the following ActiveRecord methods:

- `#save`
- `#create`
- `#update`
- `#destroy`

## How It Works

SQLObject and SQLRelation make reference to
[`DBConnection`](/lib/db_connection.rb), which delegates SQLite::Database
instance methods like `#execute`, `#get_first_row`, `#last_insert_row_id`, etc.
to a singleton instance of SQLite::Database. Consumers of the API specify this
instance by calling `DBConnection::open(file)`, providing an SQLite db file path
as an argument.

SQLObject and SQLRelation provide a utility belt of class/instance methods that
map to SQL queries. You can make use of the SQLObject API by creating a class
that inherits from it (see [`demo.rb`](./demo.rb) for an example).

Associations (`has_many`, `belongs_to`, `has_one_through`) are dynamically
generated by the [`Associatable`](./lib/associatable.rb) module, which extends
SQLObject. Associations infer `class_name`, `foreign_key` and `primary_key`
based on the same conventions as ActiveRecord. You can override these if the
database schema you're working with is non-compliant (or
ActiveSupport::Inflector fails to guess your table name).
